(this["webpackJsonppomo-tracker-react"]=this["webpackJsonppomo-tracker-react"]||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),s=n.n(o),c=n(28),r=n.n(c),i=n(4),l=n(7),d=n(18),u=n(16),j=n(8),b=n(13),h=n(14),p=function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},t.name,t.value))},m=function(){var e=Object(o.useReducer)(p,{user_id:"",password:""}),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(""),r=Object(i.a)(c,2),d=r[0],u=r[1],m=Object(l.f)();var O=function(e){s({name:e.target.name,value:e.target.value})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{className:"mb-4",children:"Login"}),Object(a.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),fetch("".concat("https://pomo-tracker-app.herokuapp.com","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then((function(e){return e.text()})).then((function(e){"User logged in"===e?(m.push("/stats"),u("")):(console.log("\ud83d\ude80 ~ file: Login.js ~ line 35 ~ message",e),u(e))})).catch((function(e){u("Couldn't log in."),console.error(e)}))},children:[Object(a.jsxs)(j.a.Group,{controlId:"EmailUsername",children:[Object(a.jsx)(j.a.Label,{children:"Username/Email"}),Object(a.jsx)(j.a.Control,{onChange:O,value:n.user_id,name:"user_id",type:"text",placeholder:"Enter username or email"})]}),Object(a.jsxs)(j.a.Group,{controlId:"LoginPassword",children:[Object(a.jsx)(j.a.Label,{children:"Password"}),Object(a.jsx)(j.a.Control,{onChange:O,value:n.password,name:"password",type:"password",placeholder:"Enter password"})]}),Object(a.jsx)("p",{className:"text-danger font-weight-bold",children:d}),Object(a.jsxs)("div",{style:{position:"relative"},children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",style:{boxShadow:"none"},children:"Login"}),Object(a.jsx)(h.b,{to:"/register",style:{boxShadow:"none",position:"absolute",bottom:0,right:0,color:"darkslategray"},children:"Register"})]})]})]})},O=function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(d.a)({},t.name,t.value))},f=function(){var e=Object(o.useReducer)(O,{}),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(!1),r=Object(i.a)(c,2),d=r[0],u=r[1],p=Object(o.useState)(""),m=Object(i.a)(p,2),f=m[0],x=m[1],g=Object(l.f)();var k=function(e){s({name:e.target.name,value:e.target.value})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{className:"mb-4",children:"Register"}),Object(a.jsxs)(j.a,{onSubmit:function(e){if(e.preventDefault(),n.password&&n.username&&n.email){fetch("".concat("https://pomo-tracker-app.herokuapp.com","/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then((function(e){return e.text()})).then((function(e){"User registered."===e?(console.log("\ud83d\ude80 ~ file: Register.js ~ line 28 ~ message",e),u(!1),g.push("/stats")):(console.log("\ud83d\ude80 ~ file: Register.js ~ line 28 ~ message",e),e.search(/unique/)>-1?x("Username or email already exists."):x(e),u(!0))})).catch((function(e){console.error("\ud83d\ude80 ~ file: Register.js ~ line 35 ~ error",e),u(!0)}))}else x("Missing field in register form."),u(!0)},children:[Object(a.jsxs)(j.a.Group,{controlId:"Username",children:[Object(a.jsx)(j.a.Label,{children:"Username"}),Object(a.jsx)(j.a.Control,{onChange:k,value:n.username,type:"text",name:"username",placeholder:"Type a username"})]}),Object(a.jsxs)(j.a.Group,{controlId:"Email",children:[Object(a.jsx)(j.a.Label,{children:"Email"}),Object(a.jsx)(j.a.Control,{onChange:k,value:n.email,type:"email",name:"email",placeholder:"Type your email"})]}),Object(a.jsxs)(j.a.Group,{controlId:"Password",children:[Object(a.jsx)(j.a.Label,{children:"Password"}),Object(a.jsx)(j.a.Control,{onChange:k,value:n.password,type:"password",name:"password",placeholder:"Type a password"})]}),d&&Object(a.jsx)("p",{className:"text-danger font-weight-bold",children:f}),Object(a.jsxs)("div",{style:{position:"relative"},children:[Object(a.jsx)(b.a,{variant:"primary",type:"submit",style:{boxShadow:"none"},children:"Register"}),Object(a.jsx)(h.b,{to:"/login",style:{boxShadow:"none",position:"absolute",bottom:0,right:0,color:"darkslategray"},children:"Login"})]})]})]})},x=n(19),g=n.n(x),k=function(e){var t="";return e>0&&(t=e.toString()+"hour",e>1&&(t+="s"),t+=", "),t},v=function(e){var t=e.stats,n=e.setStats,s=Object(o.useState)(""),c=Object(i.a)(s,2),r=c[0],d=c[1],u=Object(o.useState)(!1),j=Object(i.a)(u,2),h=j[0],p=j[1],m=Object(l.f)(),O=Object(o.useState)({today:0,week:0,month:0}),f=Object(i.a)(O,2),x=f[0],v=f[1],S=Object(o.useState)({today:0,week:0,month:0}),y=Object(i.a)(S,2),w=y[0],N=y[1];Object(o.useEffect)((function(){var e=!0;return fetch("".concat("https://pomo-tracker-app.herokuapp.com","/main-stats?date=").concat(g()().format("YYYY-MM-DD")),{credentials:"include"}).then((function(e){return e.ok?e.json():e.text()})).then((function(t){e&&n((function(){return t}))})).catch((function(e){d("Sorry. There was a problem getting the stats."),console.log(e),p(!0)})),function(){e=!1}}),[]),Object(o.useEffect)((function(){N({today:Math.floor(t.secToday/3600),week:Math.floor(t.secWeek/3600),month:Math.floor(t.secMonth/3600)}),v({today:Math.floor(t.secToday/60%60),week:Math.floor(t.secWeek/60%60),month:Math.floor(t.secMonth/60%60)})}),[t.secToday,t.secWeek,t.secMonth]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{className:"mb-1 mt-xl-5 font-weight-bold",style:{color:"saddlebrown"},children:"Stats"}),!h&&t.username?Object(a.jsxs)("h3",{className:"mb-3",children:["Hello, ",t.username,"."]}):null,Object(a.jsx)("p",{className:"text-danger font-weight-bold",children:h?r:""}),Object(a.jsx)("h4",{children:"Today."}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Pomodoros: "}),Object(a.jsx)("span",{children:t.pomoToday})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Time: "}),Object(a.jsxs)("span",{children:[k(w.today),x.today," min."]})]}),Object(a.jsx)("h4",{className:"mt-3",children:"This week."}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Pomodoros: "}),Object(a.jsx)("span",{children:t.pomoWeek})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Time: "}),Object(a.jsxs)("span",{children:[k(w.week),x.week," min."]})]}),Object(a.jsx)("h4",{className:"mt-3",children:"This month."}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Pomodoros: "}),Object(a.jsx)("span",{children:t.pomoMonth})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Time: "}),Object(a.jsxs)("span",{children:[k(w.month),x.month," min."]})]}),Object(a.jsx)(b.a,{variant:"outline-secondary",className:"btn-sm mt-3 float-right",style:{boxShadow:"none"},onClick:function(){fetch("".concat("https://pomo-tracker-app.herokuapp.com","/logout"),{method:"DELETE",credentials:"include"}).then((function(e){return e.text()})).then((function(e){"Session finished."===e?(d(""),p(!1),m.push("/login")):(p(!0),d("Sorry. Couldn't log out."))})).catch((function(e){p(!0),d("Sorry. Couldn't log out."),console.error("\ud83d\ude80 ~ file: Register.js ~ line 35 ~ error",e.message)}))},children:"Logout"})]})};var S=function(e,t){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=e}),[e]),Object(o.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},y=n.p+"static/media/alarm_sound.b2009aa7.mp3",w=function(e){var t=e.isRunning,n=e.resetTimer,s=e.resetValue,c=e.resetedFunc,r=e.sessionOver,i=e.setSessionOver,l=e.mode,d=e.minutes,u=e.seconds,j=e.setMinutes,b=e.setSeconds;S((function(){r?u<59?b(u+1):d<60&&(b(0),j(d+1)):u>0?b((function(e){return e-1})):d>0?(b(59),j((function(e){return e-1}))):(console.log("Setting extra state"),i(!0),h.play())}),t?1e3:null),Object(o.useEffect)((function(){var e="";if(r)e+="Extra - ";else switch(l){case"pomodoro":e+="Pomodoro - ";break;case"break":e+="Break - ";break;case"long-break":e+="Long Break - "}document.title=e+"".concat(p(d),":").concat(p(u))}),[d,u,l]),Object(o.useEffect)((function(){n&&(j(s),b(0),c())}),[n]);var h=new Audio(y);var p=function(e){return e<10?"0"+e.toString():e.toString()};return Object(a.jsxs)("div",{className:"display-2 font-weight-bold mb-2",children:[p(d),":",p(u)]})};var N=function(e){var t=e.updateState,n=e.sessionState,s=e.resetContinue,c=e.setResetContinue,r=Object(o.useState)("Stop"),l=Object(i.a)(r,2),d=l[0],u=l[1];Object(o.useEffect)((function(){s&&(u("Stop"),c(!1))}),[s]);var j=function(e){"wait"!==n&&(u(e),t("Continue"===e?"stop":"continue"))};return Object(a.jsxs)("div",{className:"ml-3",children:[Object(a.jsx)(b.a,{variant:"secondary",className:"mr-2",style:{border:"1px solid black",boxShadow:"none"},onClick:function(){return t("run")},children:"Start"}),Object(a.jsx)(b.a,{variant:"secondary",className:"mr-2",style:{border:"1px solid black",boxShadow:"none"},onClick:function(){return j("Stop"===d?"Continue":"Stop")},children:d}),Object(a.jsx)(b.a,{variant:"secondary",className:"mr-2",style:{border:"1px solid black",boxShadow:"none"},onClick:function(){return t("wait")},children:"End"})]})};var T=function(e){var t=e.changeMode,n=e.radioName,o=e.inputName,s=e.inputValue,c=e.setInputValue,r=e.inputChecked,i=e.invalidInput,l=e.setInvalidInput;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{style:{width:"110px",display:"inline-block"},children:[Object(a.jsx)("input",{type:"radio",className:"mr-1",id:n,name:"session-type",value:n,onClick:function(){return t(n)},checked:r}),Object(a.jsx)("label",{className:"input-label",children:o})]}),Object(a.jsx)("input",{className:"input-field",type:"text",value:s,onChange:function(e){return function(e){if(r){var t=Number(e.target.value);isNaN(t)?l(!0):t>0&&t<60&&Number.isInteger(t)?l(!1):l(!0),c(e.target.value)}}(e)},size:"5"}),Object(a.jsx)("span",{children:" min"}),i?Object(a.jsx)("span",{className:"ml-2 text-danger font-weight-bold",children:"Invalid Input"}):null]})};var C=function(e){var t=e.changeMode,n=e.mode,s=e.setNextTimer,c=e.setResetTimer,r=e.checkTextInput,l=e.setCheckTextInput,d=Object(o.useState)("25"),u=Object(i.a)(d,2),j=u[0],b=u[1],h=Object(o.useState)("5"),p=Object(i.a)(h,2),m=p[0],O=p[1],f=Object(o.useState)("15"),x=Object(i.a)(f,2),g=x[0],k=x[1],v=Object(o.useState)({pomodoro:!0,break:!1,longBreak:!1}),S=Object(i.a)(v,2),y=S[0],w=S[1],N=Object(o.useState)(!1),C=Object(i.a)(N,2),I=C[0],M=C[1],E=Object(o.useState)(!1),L=Object(i.a)(E,2),R=L[0],P=L[1],B=Object(o.useState)(!1),V=Object(i.a)(B,2),W=V[0],D=V[1];return Object(o.useEffect)((function(){switch(n){case"pomodoro":w({pomodoro:!0,break:!1,longBreak:!1}),s(I?25:parseInt(j));break;case"break":w({pomodoro:!1,break:!0,longBreak:!1}),s(R?5:parseInt(m));break;case"long-break":w({pomodoro:!1,break:!1,longBreak:!0}),s(W?15:parseInt(g))}l(!1),r&&c(!0)}),[n,r]),Object(a.jsxs)("div",{className:"mt-5",children:[Object(a.jsx)(T,{changeMode:t,radioName:"pomodoro",inputName:"Pomodoro",inputValue:j,setInputValue:b,inputChecked:y.pomodoro,invalidInput:I,setInvalidInput:M}),Object(a.jsx)(T,{changeMode:t,radioName:"break",inputName:"Break",inputValue:m,setInputValue:O,inputChecked:y.break,invalidInput:R,setInvalidInput:P}),Object(a.jsx)(T,{changeMode:t,radioName:"long-break",inputName:"Long Break",inputValue:g,setInputValue:k,inputChecked:y.longBreak,invalidInput:W,setInvalidInput:D})]})},I=n(20),M=n(17),E=n(12),L=n.p+"static/media/click.07b2086f.mp3";var R=Object(l.g)((function(e){var t=e.location,n=e.minutes,s=e.seconds,c=e.setMinutes,r=e.setSeconds,l=e.stats,d=e.setStats,j=Object(o.useState)(25),b=Object(i.a)(j,2),h=b[0],p=b[1],m=Object(o.useState)("pomodoro"),O=Object(i.a)(m,2),f=O[0],x=O[1],k=Object(o.useState)(!0),v=Object(i.a)(k,2),S=v[0],y=v[1],T=Object(o.useState)(!1),R=Object(i.a)(T,2),P=R[0],B=R[1],V=Object(o.useState)(!1),W=Object(i.a)(V,2),D=W[0],U=W[1],Y=Object(o.useState)("wait"),F=Object(i.a)(Y,2),G=F[0],J=F[1],A=Object(o.useState)(!1),_=Object(i.a)(A,2),q=_[0],z=_[1],H=Object(o.useState)(0),K=Object(i.a)(H,2),Q=K[0],X=K[1],Z=Object(o.useState)(!1),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useState)("Pomodoro"),ae=Object(i.a)(ne,2),oe=ae[0],se=ae[1],ce=new Audio(L),re=function(){var e=0,t=0;q?(e=60*(h+n)+s,t=1):e=60*(h-n-1)+(60-s),d(Object(u.a)(Object(u.a)({},l),{},{secToday:l.secToday+e,pomoToday:l.pomoToday+t,secWeek:l.secWeek+e,pomoWeek:l.pomoWeek+t,secMonth:l.secMonth+e,pomoMonth:l.pomoMonth+t}));var a=t?"true":"false";fetch("".concat("https://pomo-tracker-app.herokuapp.com","/sendRecord"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({time:e,pomodoro:a,date:g()().format("YYYY-MM-DD")}),credentials:"include"}).then((function(e){return e.text()})).then((function(e){})).catch((function(e){return console.log("error",e)}))},ie=function(){"pomodoro"===f?Q<3?(x("break"),le("break"),X((function(e){return e+1}))):(x("long-break"),le("long-break"),X(0)):(x("pomodoro"),le("pomodoro")),z(!1)},le=function(e){switch(e){case"pomodoro":se("Pomodoro");break;case"break":se("Break");break;case"long-break":se("Long Break")}};return Object(a.jsxs)(I.a,{fluid:!0,children:[Object(a.jsx)(M.a,{children:Object(a.jsx)(E.a,{md:{offset:2},children:Object(a.jsx)(w,{isRunning:D,resetTimer:S,resetValue:h,resetedFunc:function(){y(!1)},sessionOver:q,setSessionOver:z,mode:f,minutes:n,setMinutes:c,seconds:s,setSeconds:r})})}),Object(a.jsx)(M.a,{children:Object(a.jsx)(E.a,{md:{offset:1},children:q?Object(a.jsxs)("h3",{className:"text-danger",children:[oe," session finished."]}):null})}),Object(a.jsx)(M.a,{children:Object(a.jsx)(E.a,{md:{offset:2},children:Object(a.jsx)(N,{updateState:function(e){switch(e){case"run":"wait"===G&&(B(!0),U(!0),J(e),ce.play());break;case"continue":"stop"===G&&(U(!0),J(e),ce.play());break;case"stop":"run"!==G&&"continue"!==G||(U(!1),J(e),ce.play());break;case"wait":"wait"!==G&&(U(!1),"stop"===G&&te(!0),"pomodoro"===f&&"/stats"===t.pathname&&re(),(q||"pomodoro"!==f)&&ie(),B(!0),ce.play(),J(e))}},sessionState:G,resetContinue:ee,setResetContinue:te})})}),Object(a.jsx)(M.a,{children:Object(a.jsx)(E.a,{md:{offset:2},children:Object(a.jsx)(C,{changeMode:function(e){"wait"===G&&(x(e),le(e))},mode:f,setNextTimer:p,setResetTimer:y,checkTextInput:P,setCheckTextInput:B})})})]})}));var P=function(){var e=Object(l.f)(),t=Object(o.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(o.useState)(0),d=Object(i.a)(r,2),u=d[0],j=d[1],b=Object(o.useState)(0),h=Object(i.a)(b,2),p=h[0],O=h[1],x=Object(o.useState)({secToday:0,pomoToday:0,secWeek:0,pomoWeek:0,secMonth:0,pomoMonth:0}),k=Object(i.a)(x,2),S=k[0],y=k[1];return Object(o.useEffect)((function(){console.log("Current date:",g()().format());fetch("".concat("https://pomo-tracker-app.herokuapp.com","/checkCookie"),{credentials:"include"}).then((function(t){t.ok?e.push("/stats"):(console.log("\ud83d\ude80 ~ file: App.js ~ line 34 ~ response.ok",t.ok),e.push("/login"))})).catch((function(t){console.log("\ud83d\ude80 ~ file: App.js ~ line 40 ~ err",t),e.push("/login")}))}),[]),Object(a.jsx)(I.a,{fluid:!0,children:Object(a.jsxs)(M.a,{children:[Object(a.jsx)(E.a,{xl:4,md:3}),Object(a.jsx)(E.a,{xl:5,md:6,style:{marginTop:"25vh"},children:Object(a.jsx)(l.a,{path:"/",children:Object(a.jsx)(R,{minutes:u,setMinutes:j,seconds:p,setSeconds:O,stats:S,setStats:y})})}),Object(a.jsx)(E.a,{xl:2,md:3,style:{marginTop:"10vh"},children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/login",children:Object(a.jsx)(m,{})}),Object(a.jsx)(l.a,{path:"/register",children:Object(a.jsx)(f,{})}),Object(a.jsx)(l.a,{path:"/stats",children:Object(a.jsx)(v,{userName:s,setUserName:c,stats:S,setStats:y})})]})})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),s(e),c(e)}))};n(41);r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(h.a,{children:Object(a.jsx)(P,{})})}),document.getElementById("root")),B()}},[[42,1,2]]]);
//# sourceMappingURL=main.6923b519.chunk.js.map